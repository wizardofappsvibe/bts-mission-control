<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BTS Mission Control</title>
  <meta name="description"
    content="BTS Team Mission Control Dashboard ‚Äî Manage all agents, projects, and tools in one place.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
    rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <!-- Quick Launch Toolbar -->
  <div id="toolbar" class="toolbar">
    <button class="toolbar-btn" onclick="openLink('http://127.0.0.1:18789/')" title="OpenClaw Gateway">
      <i data-lucide="radio" class="toolbar-lucide"></i>
    </button>
    <button class="toolbar-btn" onclick="openLink('http://127.0.0.1:11434/')" title="Ollama">
      <i data-lucide="brain" class="toolbar-lucide"></i>
    </button>
    <button class="toolbar-btn" onclick="openLink('http://127.0.0.1:8188/')" title="ComfyUI">
      <i data-lucide="palette" class="toolbar-lucide"></i>
    </button>
    <button class="toolbar-btn" onclick="openLink('https://vercel.com/tammys-projects-a618c790')" title="Vercel">
      <i data-lucide="triangle" class="toolbar-lucide"></i>
    </button>
    <button class="toolbar-btn" onclick="openLink('https://supabase.com/dashboard')" title="Supabase">
      <i data-lucide="database" class="toolbar-lucide"></i>
    </button>
    <button class="toolbar-btn" onclick="openLink('https://www.appscreens.com')" title="App Screens">
      <i data-lucide="smartphone" class="toolbar-lucide"></i>
    </button>
    <div class="toolbar-divider"></div>
    <button class="toolbar-btn accent" onclick="showSection('terminal')" title="OpenClaw Sessions">
      <i data-lucide="terminal" class="toolbar-lucide"></i>
    </button>
  </div>

  <!-- Sidebar Navigation -->
  <nav id="sidebar" class="sidebar">
    <div class="sidebar-logo">
      <div class="logo-icon"><i data-lucide="rocket" style="width:24px;height:24px;color:var(--accent)"></i></div>
      <div class="logo-text">
        <span class="logo-title">Mission Control</span>
        <span class="logo-sub">BTS Team</span>
      </div>
    </div>
    <div class="sidebar-nav">
      <button class="nav-item active" data-section="dashboard" onclick="showSection('dashboard')">
        <i data-lucide="layout-dashboard" class="nav-lucide"></i> Dashboard
      </button>
      <button class="nav-item" data-section="agents" onclick="showSection('agents')">
        <i data-lucide="users" class="nav-lucide"></i> Agents
      </button>
      <button class="nav-item" data-section="projects" onclick="showSection('projects')">
        <i data-lucide="kanban" class="nav-lucide"></i> Projects
      </button>
      <button class="nav-item" data-section="simulator" onclick="showSection('simulator')">
        <i data-lucide="smartphone" class="nav-lucide"></i> iOS Simulator
      </button>
      <button class="nav-item" data-section="social" onclick="showSection('social')">
        <i data-lucide="megaphone" class="nav-lucide"></i> Social Media
      </button>
      <button class="nav-item" data-section="comfyui" onclick="showSection('comfyui')">
        <i data-lucide="palette" class="nav-lucide"></i> ComfyUI Studio
      </button>
      <button class="nav-item" data-section="devtools" onclick="showSection('devtools')">
        <i data-lucide="wrench" class="nav-lucide"></i> Dev Tools
      </button>
      <button class="nav-item" data-section="activity" onclick="showSection('activity')">
        <i data-lucide="activity" class="nav-lucide"></i> Live Activity
      </button>
      <button class="nav-item" data-section="terminal" onclick="showSection('terminal')">
        <i data-lucide="terminal" class="nav-lucide"></i> Sessions
      </button>
      <button class="nav-item" data-section="apple" onclick="showSection('apple')">
        <i data-lucide="apple" class="nav-lucide"></i> Apple Developer
      </button>
      <div style="height:1px;background:var(--border-light);margin:8px 0"></div>
      <button class="nav-item" data-section="factory" onclick="showSection('factory')">
        <i data-lucide="factory" class="nav-lucide"></i> The Factory
      </button>
      <button class="nav-item" data-section="cheatsheet" onclick="showSection('cheatsheet')">
        <i data-lucide="bookmark" class="nav-lucide"></i> Tammy's Cheat Sheet
      </button>
    </div>
    <div class="sidebar-footer">
      <div class="system-status">
        <div class="status-dot online"></div>
        <span>All Systems Online</span>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main id="main" class="main-content">

    <!-- ============ DASHBOARD ============ -->
    <section id="section-dashboard" class="section active">
      <div class="section-header">
        <div>
          <h1 class="section-title">Mission Control</h1>
          <p class="section-subtitle" id="current-time"></p>
        </div>
        <div class="header-actions">
          <div class="health-badge">
            <div class="status-dot online pulse"></div>
            <span>Ollama</span>
          </div>
          <div class="health-badge">
            <div class="status-dot online pulse"></div>
            <span>OpenClaw</span>
          </div>
        </div>
      </div>

      <!-- Agent Status Cards -->
      <div class="agent-grid" id="agent-grid"></div>

      <!-- Quick Actions Row -->
      <div class="quick-actions">
        <h2 class="subsection-title">Quick Actions</h2>
        <div class="actions-row">
          <button class="action-card" onclick="showSection('simulator')">
            <div class="action-icon">üì±</div>
            <span>iOS Preview</span>
          </button>
          <button class="action-card" onclick="showSection('comfyui')">
            <div class="action-icon">üé®</div>
            <span>Generate Assets</span>
          </button>
          <button class="action-card" onclick="showSection('social')">
            <div class="action-icon">üì£</div>
            <span>Social Post</span>
          </button>
          <button class="action-card" onclick="showSection('projects')">
            <div class="action-icon">üìã</div>
            <span>View Projects</span>
          </button>
          <button class="action-card" onclick="showSection('devtools')">
            <div class="action-icon">üöÄ</div>
            <span>Build & Deploy</span>
          </button>
          <button class="action-card" onclick="showSection('activity')">
            <div class="action-icon">üëÅÔ∏è</div>
            <span>Watch Agents</span>
          </button>
        </div>
      </div>

      <!-- Recent Activity Feed -->
      <div class="feed-section">
        <h2 class="subsection-title">Recent Activity</h2>
        <div class="feed" id="activity-feed"></div>
      </div>
    </section>

    <!-- ============ AGENTS ============ -->
    <section id="section-agents" class="section">
      <div class="section-header">
        <h1 class="section-title">Agent Teams</h1>
      </div>
      <div class="agent-detail-grid" id="agent-detail-grid"></div>
    </section>

    <!-- ============ PROJECTS / KANBAN ============ -->
    <section id="section-projects" class="section">
      <div class="section-header">
        <h1 class="section-title">Tammy's Apps</h1>
        <div class="header-actions">
          <select id="project-agent-filter" class="select-elegant" onchange="filterProjects()">
            <option value="all">All Agents</option>
            <option value="luna">Luna ‚Äî Research</option>
            <option value="jace">Jace ‚Äî Strategy</option>
            <option value="blaze">Blaze ‚Äî CMO</option>
            <option value="ivy">Ivy ‚Äî Builder</option>
            <option value="vex">Vex ‚Äî CTO/QA</option>
            <option value="nova">Nova ‚Äî Launch</option>
            <option value="claude">Claude ‚Äî IT</option>
            <option value="ozzy">Ozzy ‚Äî COO</option>
          </select>
          <button class="btn-primary" onclick="addProject()">+ New Product</button>
        </div>
      </div>
      <div class="kanban-board">
        <div class="kanban-column" data-status="idea">
          <div class="kanban-header">üí° Idea <span class="kanban-count" id="count-idea"></span></div>
          <div class="kanban-cards" id="kanban-idea"></div>
        </div>
        <div class="kanban-column" data-status="built">
          <div class="kanban-header">‚úÖ Built <span class="kanban-count" id="count-built"></span></div>
          <div class="kanban-cards" id="kanban-built"></div>
        </div>
        <div class="kanban-column" data-status="broken">
          <div class="kanban-header">üîß Broken <span class="kanban-count" id="count-broken"></span></div>
          <div class="kanban-cards" id="kanban-broken"></div>
        </div>
      </div>
    </section>

    <!-- ============ iOS SIMULATOR ============ -->
    <section id="section-simulator" class="section">
      <div class="section-header">
        <h1 class="section-title">iOS Simulator</h1>
        <div class="header-actions">
          <select id="device-select" class="select-elegant" onchange="changeDevice()">
            <option value="iphone15pro">iPhone 15 Pro</option>
            <option value="iphone15">iPhone 15</option>
            <option value="iphoneSE">iPhone SE</option>
            <option value="ipad">iPad Pro</option>
          </select>
          <button class="btn-secondary" onclick="screenshotSimulator()">üì∏ Screenshot</button>
          <button class="btn-secondary" onclick="recordSimulator()">üî¥ Record</button>
        </div>
      </div>
      <div class="simulator-layout">
        <div class="simulator-frame" id="simulator-frame">
          <div class="device-notch"></div>
          <iframe id="simulator-iframe" src="about:blank" class="simulator-screen"></iframe>
          <div class="device-home-bar"></div>
        </div>
        <div class="simulator-controls">
          <div class="control-group">
            <label class="control-label">Preview URL</label>
            <div class="input-row">
              <input type="url" id="simulator-url" class="input-elegant" placeholder="http://localhost:3000"
                value="http://localhost:3000">
              <button class="btn-primary" onclick="loadSimulator()">Load</button>
            </div>
          </div>
          <div class="control-group">
            <label class="control-label">Xcode Simulator</label>
            <div class="input-row">
              <select id="xcode-device" class="input-elegant">
                <option value="0050BEFD-0282-4F19-A913-DCC4FFF8C289">iPhone 17 Pro</option>
                <option value="B90242A0-7099-46A0-8C21-2C3EC3C06737">iPhone 17 Pro Max</option>
                <option value="54AB9E53-D88E-421E-B249-20D00206B837">iPhone Air</option>
                <option value="20F8A546-C40D-4D4E-AC0F-60DD8F592D68">iPhone 17</option>
                <option value="1F36ACA1-6A5C-442D-9D3A-774DFB46F50F">iPhone 16 Pro</option>
                <option value="70C8BCCD-65C5-4CD5-8249-E20BF90497DD">iPad Pro 13" (M5)</option>
              </select>
              <button class="btn-primary" onclick="bootSimulator()">‚ñ∂ Boot</button>
            </div>
          </div>
          <div class="control-group">
            <label class="control-label">TestFlight QR Code</label>
            <div class="qr-container" id="testflight-qr">
              <div class="qr-placeholder">Enter TestFlight URL to generate QR</div>
            </div>
            <div class="input-row">
              <input type="text" id="testflight-url" class="input-elegant"
                placeholder="https://testflight.apple.com/join/...">
              <button class="btn-primary" onclick="generateTestFlightQR()">Generate</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ============ SOCIAL MEDIA ============ -->
    <section id="section-social" class="section">
      <div class="section-header">
        <h1 class="section-title">Social Media Command Center</h1>
        <div class="header-actions">
          <button class="btn-primary" onclick="createPost()">+ New Post</button>
        </div>
      </div>
      <div class="social-layout">
        <div class="social-composer">
          <h3 class="card-title">Compose Post</h3>
          <textarea id="post-content" class="textarea-elegant" rows="4"
            placeholder="What's happening with Wizard of Apps?"></textarea>
          <div class="platform-toggles">
            <label class="platform-toggle active"><input type="checkbox" checked> ùïè Twitter</label>
            <label class="platform-toggle"><input type="checkbox"> üì∏ Instagram</label>
            <label class="platform-toggle"><input type="checkbox"> üéµ TikTok</label>
            <label class="platform-toggle"><input type="checkbox"> üíº LinkedIn</label>
          </div>
          <div class="post-actions">
            <button class="btn-secondary">Save Draft</button>
            <button class="btn-secondary">Schedule</button>
            <button class="btn-primary">Publish Now</button>
          </div>
        </div>
        <div class="content-calendar">
          <h3 class="card-title">Content Calendar</h3>
          <div class="calendar-grid" id="calendar-grid"></div>
        </div>
        <div class="asset-library">
          <h3 class="card-title">Asset Library</h3>
          <div class="asset-grid" id="asset-grid">
            <div class="asset-empty">Generate assets in ComfyUI Studio ‚Üí</div>
          </div>
        </div>
      </div>
    </section>

    <!-- ============ COMFYUI ============ -->
    <section id="section-comfyui" class="section">
      <div class="section-header">
        <h1 class="section-title">ComfyUI Studio</h1>
        <div class="header-actions">
          <button class="btn-secondary" onclick="openLink('http://127.0.0.1:8188/')">Open Full ComfyUI ‚Üó</button>
        </div>
      </div>
      <div class="comfy-layout">
        <div class="comfy-quick-actions">
          <h3 class="card-title">Quick Generate</h3>
          <div class="comfy-presets">
            <button class="preset-card" onclick="generatePreset('screenshot')">
              <span class="preset-icon">üì±</span>
              <span class="preset-label">App Screenshots</span>
            </button>
            <button class="preset-card" onclick="generatePreset('social')">
              <span class="preset-icon">üì£</span>
              <span class="preset-label">Social Graphics</span>
            </button>
            <button class="preset-card" onclick="generatePreset('banner')">
              <span class="preset-icon">üñºÔ∏è</span>
              <span class="preset-label">Marketing Banner</span>
            </button>
            <button class="preset-card" onclick="generatePreset('icon')">
              <span class="preset-icon">‚≠ê</span>
              <span class="preset-label">App Icon</span>
            </button>
            <button class="preset-card" onclick="generatePreset('splash')">
              <span class="preset-icon">üåä</span>
              <span class="preset-label">Splash Screen</span>
            </button>
            <button class="preset-card" onclick="generatePreset('logo')">
              <span class="preset-icon">üíé</span>
              <span class="preset-label">Logo</span>
            </button>
          </div>
        </div>
        <div class="comfy-embed">
          <iframe src="http://127.0.0.1:8188/" class="comfy-iframe" id="comfy-iframe"></iframe>
        </div>
      </div>
    </section>

    <!-- ============ DEV TOOLS ============ -->
    <section id="section-devtools" class="section">
      <div class="section-header">
        <h1 class="section-title">App Development Toolkit</h1>
      </div>
      <div class="devtools-grid">
        <div class="devtool-card">
          <h3 class="card-title">üèóÔ∏è Build Status</h3>
          <div class="build-list" id="build-list">
            <div class="build-item">
              <div class="build-status success"></div>
              <div class="build-info">
                <span class="build-name">wizard-of-apps (iOS)</span>
                <span class="build-time">Last build: 2h ago</span>
              </div>
            </div>
            <div class="build-item">
              <div class="build-status pending"></div>
              <div class="build-info">
                <span class="build-name">market-signals-widget</span>
                <span class="build-time">In queue...</span>
              </div>
            </div>
          </div>
          <button class="btn-primary full-width" onclick="triggerBuild()">Trigger EAS Build</button>
        </div>
        <div class="devtool-card">
          <h3 class="card-title">üçé App Store Status</h3>
          <div class="store-status">
            <div class="store-item">
              <span class="store-badge ready">Ready for Sale</span>
              <span>Wizard of Apps v1.2</span>
            </div>
            <div class="store-item">
              <span class="store-badge review">In Review</span>
              <span>Market Signals v1.0</span>
            </div>
          </div>
        </div>
        <div class="devtool-card">
          <h3 class="card-title">‚úàÔ∏è TestFlight</h3>
          <div class="testflight-section">
            <div class="qr-container" id="testflight-qr">
              <div class="qr-placeholder">No active TestFlight build</div>
            </div>
            <input type="text" class="input-elegant" id="testflight-url" placeholder="TestFlight URL">
            <button class="btn-primary full-width" onclick="generateTestFlightQR()">Generate Link</button>
          </div>
        </div>
        <div class="devtool-card">
          <h3 class="card-title">üîë API Key Vault</h3>
          <div class="key-list">
            <div class="key-item">
              <span class="key-name">GEMINI_API_KEY</span>
              <span class="key-value">AIzaSy‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢V7w</span>
              <button class="btn-tiny" onclick="copyKey('gemini')">Copy</button>
            </div>
            <div class="key-item">
              <span class="key-name">SUPABASE_KEY</span>
              <span class="key-value">eyJhbG‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</span>
              <button class="btn-tiny" onclick="copyKey('supabase')">Copy</button>
            </div>
            <div class="key-item">
              <span class="key-name">OPENAI_KEY</span>
              <span class="key-value">sk-proj‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</span>
              <button class="btn-tiny" onclick="copyKey('openai')">Copy</button>
            </div>
          </div>
        </div>
        <div class="devtool-card">
          <h3 class="card-title">üì¶ Apple Toolchain</h3>
          <div class="dep-list">
            <div class="dep-item current">
              <span>Xcode</span>
              <span class="dep-version">26.2 ‚úì</span>
            </div>
            <div class="dep-item current">
              <span>Swift</span>
              <span class="dep-version">6.2 ‚úì</span>
            </div>
            <div class="dep-item current">
              <span>SwiftUI</span>
              <span class="dep-version">Liquid Glass ‚úì</span>
            </div>
          </div>
        </div>
        <div class="devtool-card">
          <h3 class="card-title">üåç Environments</h3>
          <div class="env-list">
            <button class="env-item active-env" onclick="openLink('http://127.0.0.1:18789/')">
              <div class="env-dot dev"></div>
              <span>Xcode / Simulator</span>
              <span class="env-url">Local Build</span>
            </button>
            <button class="env-item" onclick="openLink('https://appstoreconnect.apple.com')">
              <div class="env-dot staging"></div>
              <span>TestFlight</span>
              <span class="env-url">appstoreconnect.apple.com</span>
            </button>
            <button class="env-item" onclick="openLink('https://apps.apple.com')">
              <div class="env-dot prod"></div>
              <span>App Store</span>
              <span class="env-url">apps.apple.com</span>
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- ============ LIVE ACTIVITY ============ -->
    <section id="section-activity" class="section">
      <div class="section-header">
        <h1 class="section-title">Live Agent Activity</h1>
        <div class="header-actions">
          <div class="health-badge">
            <div class="status-dot online pulse"></div>
            <span>Real-time</span>
          </div>
        </div>
      </div>
      <div class="activity-grid" id="live-activity-grid"></div>
    </section>

    <!-- ============ THE FACTORY ============ -->
    <section id="section-factory" class="section">
      <div class="section-header">
        <h1 class="section-title">The Factory</h1>
        <div class="header-actions">
          <div class="health-badge">
            <div class="status-dot online pulse"></div>
            <span>Pipeline Active</span>
          </div>
        </div>
      </div>

      <!-- Pipeline Flow -->
      <div class="factory-pipeline">
        <!-- STAGE 1: RESEARCH (Luna) -->
        <div class="factory-card" data-stage="research">
          <div class="factory-card-stripe" style="background:#E879F9"></div>
          <div class="factory-card-header">
            <div class="factory-agent-info">
              <div class="factory-avatar" style="background:#FAE8FF">üîç</div>
              <div>
                <div class="factory-agent-name">Luna</div>
                <div class="factory-agent-role">Research Scout</div>
              </div>
            </div>
            <div class="factory-stage-badge" style="background:#FAE8FF;color:#A855F7">Stage 1</div>
          </div>
          <div class="factory-description">
            Researches market gaps, writes briefs, vets trademarks/domains/socials. Dumps to queue/.
          </div>
          <div class="factory-tools">
            <h4 class="factory-tools-title">Tools</h4>
            <div class="factory-tool-list">
              <span class="factory-tool">Brave Search</span>
              <span class="factory-tool">USPTO DB</span>
              <span class="factory-tool">App Store</span>
            </div>
          </div>
          <div class="factory-output">
            <h4 class="factory-tools-title">Output</h4>
            <div class="factory-output-item">Vetted brief ‚Üí queue/ folder</div>
          </div>
          <div class="factory-status" id="factory-status-luna">Loading status...</div>
        </div>

        <!-- Arrow -->
        <div class="factory-arrow">
          <div class="factory-arrow-line"></div>
          <div class="factory-arrow-label" style="background:#FAE8FF;color:#A855F7">Queue</div>
          <div class="factory-arrow-line"></div>
        </div>

        <!-- STAGE 2: BRANDING (Blaze) -->
        <div class="factory-card" data-stage="branding">
          <div class="factory-card-stripe" style="background:#DC2626"></div>
          <div class="factory-card-header">
            <div class="factory-agent-info">
              <div class="factory-avatar" style="background:#FEE2E2">üî•</div>
              <div>
                <div class="factory-agent-name">Blaze</div>
                <div class="factory-agent-role">CMO ‚Äî Trademark & Brand</div>
              </div>
            </div>
            <div class="factory-stage-badge" style="background:#FEE2E2;color:#DC2626">Stage 2</div>
          </div>
          <div class="factory-description">
            Verifies trademarks via USPTO, registers domains, grabs social handles. Also #2 IT backup.
          </div>
          <div class="factory-tools">
            <h4 class="factory-tools-title">Tools</h4>
            <div class="factory-tool-list">
              <span class="factory-tool">USPTO Database</span>
              <span class="factory-tool">Vercel Domains</span>
              <span class="factory-tool">Social Media</span>
            </div>
          </div>
          <div class="factory-output">
            <h4 class="factory-tools-title">Output</h4>
            <div class="factory-output-item">VETTED.md ‚Äî clean trademark + domain + handles</div>
          </div>
          <div class="factory-status" id="factory-status-blaze">Loading status...</div>
        </div>

        <!-- Arrow -->
        <div class="factory-arrow">
          <div class="factory-arrow-line"></div>
          <div class="factory-arrow-label" style="background:#FEE2E2;color:#DC2626">Brand OK</div>
          <div class="factory-arrow-line"></div>
        </div>

        <!-- STAGE 3: BUILD (Ivy + Vex) -->
        <div class="factory-card" data-stage="build">
          <div class="factory-card-stripe" style="background:#34D399"></div>
          <div class="factory-card-header">
            <div class="factory-agent-info">
              <div class="factory-avatar" style="background:#D1FAE5">üèóÔ∏è</div>
              <div>
                <div class="factory-agent-name">Ivy + Vex</div>
                <div class="factory-agent-role">Builders #1 & #2</div>
              </div>
            </div>
            <div class="factory-stage-badge" style="background:#D1FAE5;color:#059669">Stage 3</div>
          </div>
          <div class="factory-description">
            Two builders pulling from queue/. Each works ONE app at a time until it compiles. Hands off to Ozzy + Jace.
          </div>
          <div class="factory-tools">
            <h4 class="factory-tools-title">Tools</h4>
            <div class="factory-tool-list">
              <span class="factory-tool">Xcode</span>
              <span class="factory-tool">SwiftUI</span>
              <span class="factory-tool">StoreKit 2</span>
            </div>
          </div>
          <div class="factory-output">
            <h4 class="factory-tools-title">Output</h4>
            <div class="factory-output-item">Complete .xcodeproj + HANDOFF.md</div>
          </div>
          <div class="factory-status" id="factory-status-ivy">Loading status...</div>
        </div>

        <!-- Arrow -->
        <div class="factory-arrow">
          <div class="factory-arrow-line"></div>
          <div class="factory-arrow-label" style="background:#D1FAE5;color:#059669">HANDOFF.md</div>
          <div class="factory-arrow-line"></div>
        </div>

        <!-- STAGE 4: QC + ASO (Ozzy + Jace) -->
        <div class="factory-card" data-stage="qa">
          <div class="factory-card-stripe" style="background:#7C3AED"></div>
          <div class="factory-card-header">
            <div class="factory-agent-info">
              <div class="factory-avatar" style="background:#EDE9FE">ü¶æ</div>
              <div>
                <div class="factory-agent-name">Ozzy + Jace</div>
                <div class="factory-agent-role">QA & ASO (parallel)</div>
              </div>
            </div>
            <div class="factory-stage-badge" style="background:#EDE9FE;color:#7C3AED">Stage 4</div>
          </div>
          <div class="factory-description">
            Ozzy reviews code quality + tests builds. Jace writes App Store listing, keywords, ASO. Run in parallel.
          </div>
          <div class="factory-tools">
            <h4 class="factory-tools-title">Tools</h4>
            <div class="factory-tool-list">
              <span class="factory-tool">xcodebuild</span>
              <span class="factory-tool">Code Review</span>
              <span class="factory-tool">ASO Keywords</span>
            </div>
          </div>
          <div class="factory-output">
            <h4 class="factory-tools-title">Output</h4>
            <div class="factory-output-item">REVIEW.md + ASO.md ‚Üí ready for bundling</div>
          </div>
          <div class="factory-status" id="factory-status-vex">Loading status...</div>
        </div>

        <!-- Arrow -->
        <div class="factory-arrow">
          <div class="factory-arrow-line"></div>
          <div class="factory-arrow-label" style="background:#EDE9FE;color:#7C3AED">QC Pass</div>
          <div class="factory-arrow-line"></div>
        </div>

        <!-- STAGE 5: BUNDLE + SCREENSHOTS (Nova + App Star) -->
        <div class="factory-card" data-stage="distribute">
          <div class="factory-card-stripe" style="background:#60A5FA"></div>
          <div class="factory-card-header">
            <div class="factory-agent-info">
              <div class="factory-avatar" style="background:#DBEAFE">üöÄ</div>
              <div>
                <div class="factory-agent-name">Nova + App Star</div>
                <div class="factory-agent-role">Bundle & Screenshots</div>
              </div>
            </div>
            <div class="factory-stage-badge" style="background:#DBEAFE;color:#2563EB">Stage 5</div>
          </div>
          <div class="factory-description">
            Nova bundles the app + creates screenshots with pro templates. App Star does competitive analysis + icon
            design.
          </div>
          <div class="factory-tools">
            <h4 class="factory-tools-title">Tools</h4>
            <div class="factory-tool-list">
              <span class="factory-tool">App Screens</span>
              <span class="factory-tool">Simulator</span>
              <span class="factory-tool">App Store Connect</span>
            </div>
          </div>
          <div class="factory-output">
            <h4 class="factory-tools-title">Output</h4>
            <div class="factory-output-item">Complete bundle ‚Üí screenshots + IPA + listing</div>
          </div>
          <div class="factory-status" id="factory-status-nova">Loading status...</div>
        </div>

        <!-- Arrow -->
        <div class="factory-arrow">
          <div class="factory-arrow-line"></div>
          <div class="factory-arrow-label" style="background:#FEF3C7;color:#D97706">üëë Tammy Approves</div>
          <div class="factory-arrow-line"></div>
        </div>

        <!-- STAGE 6: TESTFLIGHT + MARKETING (Blaze) -->
        <div class="factory-card" data-stage="launch">
          <div class="factory-card-stripe" style="background:#F59E0B"></div>
          <div class="factory-card-header">
            <div class="factory-agent-info">
              <div class="factory-avatar" style="background:#FEF3C7">üî•</div>
              <div>
                <div class="factory-agent-name">Blaze</div>
                <div class="factory-agent-role">Marketing Launch</div>
              </div>
            </div>
            <div class="factory-stage-badge" style="background:#FEF3C7;color:#D97706">Stage 6</div>
          </div>
          <div class="factory-description">
            After TestFlight, Blaze runs the marketing launch ‚Äî social media, campaigns, tracks downloads.
          </div>
          <div class="factory-tools">
            <h4 class="factory-tools-title">Tools</h4>
            <div class="factory-tool-list">
              <span class="factory-tool">Social Media</span>
              <span class="factory-tool">Analytics</span>
              <span class="factory-tool">Launch Plan</span>
            </div>
          </div>
          <div class="factory-output">
            <h4 class="factory-tools-title">Output</h4>
            <div class="factory-output-item">App Store ‚Üí live app + marketing campaign üéâ</div>
          </div>
        </div>
      </div>

      <!-- Claude IT Support Badge -->
      <div
        style="margin:20px 0;padding:12px 20px;background:rgba(107,114,128,0.1);border-radius:12px;display:flex;align-items:center;gap:12px">
        <div class="factory-avatar" style="background:#F3F4F6">üîß</div>
        <div>
          <strong>Claude ‚Äî IT Support (24/7)</strong>
          <div style="font-size:13px;color:var(--text-muted)">Monitors gateway, Ollama, tools. Helps debug. Always on.
            Escalation: Claude ‚Üí Blaze ‚Üí Ozzy ‚Üí Antigravity ‚Üí Tammy</div>
        </div>
      </div>

      <!-- Pipeline Tracker -->
      <div class="factory-tracker">
        <div class="tracker-header">
          <h2 class="subsection-title">Pipeline Tracker</h2>
          <button class="btn-primary" onclick="addFactoryIdea()">+ Add Idea</button>
        </div>
        <div class="tracker-lanes">
          <div class="tracker-lane" data-stage="new-idea">
            <div class="tracker-lane-header" style="border-color:#E879F9">
              <span class="tracker-lane-dot" style="background:#E879F9"></span>
              üí° New Ideas
              <span class="tracker-lane-count" id="tcount-new-idea">0</span>
            </div>
            <div class="tracker-lane-items" id="tracker-new-idea"></div>
          </div>
          <div class="tracker-lane" data-stage="vetted">
            <div class="tracker-lane-header" style="border-color:#A78BFA">
              <span class="tracker-lane-dot" style="background:#A78BFA"></span>
              ‚úÖ Vetted
              <span class="tracker-lane-count" id="tcount-vetted">0</span>
            </div>
            <div class="tracker-lane-items" id="tracker-vetted"></div>
          </div>
          <div class="tracker-lane" data-stage="building">
            <div class="tracker-lane-header" style="border-color:#34D399">
              <span class="tracker-lane-dot" style="background:#34D399"></span>
              Building
              <span class="tracker-lane-count" id="tcount-building">0</span>
            </div>
            <div class="tracker-lane-items" id="tracker-building"></div>
          </div>
          <div class="tracker-lane" data-stage="testing">
            <div class="tracker-lane-header" style="border-color:#F97316">
              <span class="tracker-lane-dot" style="background:#F97316"></span>
              Testing
              <span class="tracker-lane-count" id="tcount-testing">0</span>
            </div>
            <div class="tracker-lane-items" id="tracker-testing"></div>
          </div>
          <div class="tracker-lane" data-stage="approval">
            <div class="tracker-lane-header" style="border-color:#F59E0B">
              <span class="tracker-lane-dot" style="background:#F59E0B"></span>
              Awaiting Approval
              <span class="tracker-lane-count" id="tcount-approval">0</span>
            </div>
            <div class="tracker-lane-items" id="tracker-approval"></div>
          </div>
          <div class="tracker-lane" data-stage="distributing">
            <div class="tracker-lane-header" style="border-color:#60A5FA">
              <span class="tracker-lane-dot" style="background:#60A5FA"></span>
              Distributing
              <span class="tracker-lane-count" id="tcount-distributing">0</span>
            </div>
            <div class="tracker-lane-items" id="tracker-distributing"></div>
          </div>
          <div class="tracker-lane" data-stage="launched">
            <div class="tracker-lane-header" style="border-color:#34C759">
              <span class="tracker-lane-dot" style="background:#34C759"></span>
              Launched
              <span class="tracker-lane-count" id="tcount-launched">0</span>
            </div>
            <div class="tracker-lane-items" id="tracker-launched"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- ============ TAMMY'S CHEAT SHEET ============ -->
    <section id="section-cheatsheet" class="section">
      <div class="section-header">
        <h1 class="section-title">Tammy's Cheat Sheet üìã</h1>
      </div>

      <div class="grid-2col" style="gap:24px">
        <!-- Tokens & Access -->
        <div class="card">
          <h3 style="margin:0 0 16px;color:var(--accent)">üîë Tokens & Access</h3>
          <table style="width:100%;font-size:13px">
            <tr style="border-bottom:1px solid var(--border-light)">
              <td style="padding:8px 0;font-weight:600">Browser Relay Token</td>
              <td style="padding:8px 0;font-family:monospace;font-size:11px;word-break:break-all">
                6681ef5b399bf3e81dd71b6f4283d25d2d347057bbbf5e6b</td>
            </tr>
            <tr style="border-bottom:1px solid var(--border-light)">
              <td style="padding:8px 0;font-weight:600">Gateway URL</td>
              <td style="padding:8px 0;font-family:monospace">ws://127.0.0.1:18789</td>
            </tr>
            <tr style="border-bottom:1px solid var(--border-light)">
              <td style="padding:8px 0;font-weight:600">Dashboard</td>
              <td style="padding:8px 0"><a href="http://127.0.0.1:18789" target="_blank"
                  style="color:var(--accent)">http://127.0.0.1:18789</a></td>
            </tr>
            <tr style="border-bottom:1px solid var(--border-light)">
              <td style="padding:8px 0;font-weight:600">Gemini Auth</td>
              <td style="padding:8px 0">tammylsantana@gmail.com (google-gemini-cli)</td>
            </tr>
            <tr>
              <td style="padding:8px 0;font-weight:600">Supabase</td>
              <td style="padding:8px 0"><a href="https://supabase.com/dashboard/project/tkjlbgzymqnthyfzlwug"
                  target="_blank" style="color:var(--accent)">Factory DB</a></td>
            </tr>
          </table>
        </div>

        <!-- Important Paths -->
        <div class="card">
          <h3 style="margin:0 0 16px;color:#34D399">üìÅ Important Paths</h3>
          <table style="width:100%;font-size:13px">
            <tr style="border-bottom:1px solid var(--border-light)">
              <td style="padding:8px 0;font-weight:600">All Config</td>
              <td style="padding:8px 0;font-family:monospace;font-size:11px">~/.openclaw/openclaw.json</td>
            </tr>
            <tr style="border-bottom:1px solid var(--border-light)">
              <td style="padding:8px 0;font-weight:600">Agent Memories</td>
              <td style="padding:8px 0;font-family:monospace;font-size:11px">~/.openclaw/agents/[name]/agent/MEMORY.md
              </td>
            </tr>
            <tr style="border-bottom:1px solid var(--border-light)">
              <td style="padding:8px 0;font-weight:600">Factory Queue</td>
              <td style="padding:8px 0;font-family:monospace;font-size:11px">~/.openclaw/factory/queue/</td>
            </tr>
            <tr style="border-bottom:1px solid var(--border-light)">
              <td style="padding:8px 0;font-weight:600">Factory Builds</td>
              <td style="padding:8px 0;font-family:monospace;font-size:11px">~/.openclaw/factory/builds/</td>
            </tr>
            <tr style="border-bottom:1px solid var(--border-light)">
              <td style="padding:8px 0;font-weight:600">Shift Scheduler</td>
              <td style="padding:8px 0;font-family:monospace;font-size:11px">~/.openclaw/scripts/shift-scheduler.sh</td>
            </tr>
            <tr style="border-bottom:1px solid var(--border-light)">
              <td style="padding:8px 0;font-weight:600">Shift Log</td>
              <td style="padding:8px 0;font-family:monospace;font-size:11px">~/.openclaw/shift-log.txt</td>
            </tr>
            <tr style="border-bottom:1px solid var(--border-light)">
              <td style="padding:8px 0;font-weight:600">Claude Status</td>
              <td style="padding:8px 0;font-family:monospace;font-size:11px">~/.openclaw/factory/claude-status.log</td>
            </tr>
            <tr>
              <td style="padding:8px 0;font-weight:600">Gemini Usage</td>
              <td style="padding:8px 0;font-family:monospace;font-size:11px">~/.openclaw/factory/gemini-usage.log</td>
            </tr>
          </table>
        </div>

        <!-- Shift Schedule -->
        <div class="card">
          <h3 style="margin:0 0 16px;color:#F59E0B">‚è∞ Shift Schedule (2 agents + Claude 24/7)</h3>
          <table style="width:100%;font-size:13px">
            <tr style="border-bottom:1px solid var(--border-light);background:rgba(232,121,249,0.1)">
              <td style="padding:8px">üïõ 12 AM</td>
              <td style="padding:8px">Luna + Blaze</td>
              <td style="padding:8px">Research + Brand</td>
            </tr>
            <tr style="border-bottom:1px solid var(--border-light);background:rgba(52,211,153,0.1)">
              <td style="padding:8px">üïì 4 AM</td>
              <td style="padding:8px">Ivy + Vex</td>
              <td style="padding:8px">Build shift 1</td>
            </tr>
            <tr style="border-bottom:1px solid var(--border-light);background:rgba(124,58,237,0.1)">
              <td style="padding:8px">üïó 8 AM</td>
              <td style="padding:8px">Ozzy + Jace</td>
              <td style="padding:8px">QA + ASO</td>
            </tr>
            <tr style="border-bottom:1px solid var(--border-light);background:rgba(245,158,11,0.1)">
              <td style="padding:8px">üïõ 12 PM</td>
              <td style="padding:8px">App Star + Jace</td>
              <td style="padding:8px">Screenshots + Marketing</td>
            </tr>
            <tr style="border-bottom:1px solid var(--border-light);background:rgba(59,130,246,0.1)">
              <td style="padding:8px">üïì 4 PM</td>
              <td style="padding:8px">Nova + App Star</td>
              <td style="padding:8px">Bundle + TestFlight</td>
            </tr>
            <tr style="background:rgba(52,211,153,0.1)">
              <td style="padding:8px">üïó 8 PM</td>
              <td style="padding:8px">Ivy + Vex</td>
              <td style="padding:8px">Build shift 2</td>
            </tr>
            <tr style="background:rgba(107,114,128,0.15)">
              <td style="padding:8px">üîß 24/7</td>
              <td style="padding:8px;font-weight:700">Claude</td>
              <td style="padding:8px">IT Support</td>
            </tr>
          </table>
        </div>

        <!-- Quick Commands -->
        <div class="card">
          <h3 style="margin:0 0 16px;color:#2563EB">‚ö° Quick Commands</h3>
          <table style="width:100%;font-size:13px">
            <tr style="border-bottom:1px solid var(--border-light)">
              <td style="padding:8px 0;font-weight:600">Restart Gateway</td>
              <td style="padding:8px 0;font-family:monospace;font-size:11px">openclaw gateway restart</td>
            </tr>
            <tr style="border-bottom:1px solid var(--border-light)">
              <td style="padding:8px 0;font-weight:600">Get Browser Token</td>
              <td style="padding:8px 0;font-family:monospace;font-size:11px">openclaw config get gateway.auth.token</td>
            </tr>
            <tr style="border-bottom:1px solid var(--border-light)">
              <td style="padding:8px 0;font-weight:600">Check Channels</td>
              <td style="padding:8px 0;font-family:monospace;font-size:11px">openclaw channels status --probe</td>
            </tr>
            <tr style="border-bottom:1px solid var(--border-light)">
              <td style="padding:8px 0;font-weight:600">Run Shift Now</td>
              <td style="padding:8px 0;font-family:monospace;font-size:11px">~/.openclaw/scripts/shift-scheduler.sh</td>
            </tr>
            <tr style="border-bottom:1px solid var(--border-light)">
              <td style="padding:8px 0;font-weight:600">Broadcast Brief</td>
              <td style="padding:8px 0;font-family:monospace;font-size:11px">~/.openclaw/scripts/briefing-broadcast.sh
              </td>
            </tr>
            <tr style="border-bottom:1px solid var(--border-light)">
              <td style="padding:8px 0;font-weight:600">Check Ollama</td>
              <td style="padding:8px 0;font-family:monospace;font-size:11px">curl http://localhost:11434/api/tags</td>
            </tr>
            <tr>
              <td style="padding:8px 0;font-weight:600">Agent Sessions</td>
              <td style="padding:8px 0;font-family:monospace;font-size:11px">openclaw sessions --all-agents --active 120
              </td>
            </tr>
          </table>
        </div>

        <!-- Escalation Chain -->
        <div class="card" style="grid-column: 1 / -1">
          <h3 style="margin:0 0 16px;color:#DC2626">üö® Escalation Chain</h3>
          <div style="display:flex;align-items:center;gap:12px;flex-wrap:wrap;font-size:14px;font-weight:500">
            <span style="background:rgba(232,121,249,0.15);padding:6px 14px;border-radius:8px">Agent has issue</span>
            <span style="color:var(--text-muted)">‚Üí</span>
            <span style="background:rgba(107,114,128,0.15);padding:6px 14px;border-radius:8px">üîß Claude (IT
              24/7)</span>
            <span style="color:var(--text-muted)">‚Üí</span>
            <span style="background:rgba(220,38,38,0.15);padding:6px 14px;border-radius:8px">üî• Blaze (#2 backup)</span>
            <span style="color:var(--text-muted)">‚Üí</span>
            <span style="background:rgba(124,58,237,0.15);padding:6px 14px;border-radius:8px">ü¶æ Ozzy (#3 backup)</span>
            <span style="color:var(--text-muted)">‚Üí</span>
            <span style="background:rgba(59,130,246,0.15);padding:6px 14px;border-radius:8px">ü§ñ Antigravity</span>
            <span style="color:var(--text-muted)">‚Üí</span>
            <span style="background:rgba(220,38,38,0.15);padding:6px 14px;border-radius:8px">üëë Tammy (last
              resort)</span>
          </div>
        </div>
      </div>
    </section>

    <!-- ============ TERMINAL ============ -->
    <section id="section-terminal" class="section">
      <div class="section-header">
        <h1 class="section-title">OpenClaw Sessions</h1>
        <div class="header-actions">
          <button class="btn-secondary" onclick="openLink('http://127.0.0.1:18789/')">Open Full UI ‚Üó</button>
        </div>
      </div>
      <div
        style="width:100%;height:calc(100vh - 120px);border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,0.1);">
        <iframe src="http://127.0.0.1:18789/"
          style="width:100%;height:100%;border:none;border-radius:12px;background:#1a1a2e;"></iframe>
      </div>
    </section>

    <!-- ============ APPLE DEVELOPER ============ -->
    <section id="section-apple" class="section">
      <div class="section-header">
        <h1 class="section-title"> Apple Developer Hub</h1>
        <div class="header-actions">
          <button class="btn-secondary" onclick="openLink('https://developer.apple.com')">Developer Portal ‚Üó</button>
        </div>
      </div>
      <div style="display:flex;gap:8px;margin-bottom:16px;flex-wrap:wrap;">
        <button class="btn-primary" onclick="loadApplePanel('https://appstoreconnect.apple.com', 'App Store Connect')"
          style="font-size:0.85rem">
          üì¶ App Store Connect
        </button>
        <button class="btn-secondary" onclick="loadApplePanel('https://appstoreconnect.apple.com/apps', 'My Apps')"
          style="font-size:0.85rem">
          üì± My Apps
        </button>
        <button class="btn-secondary"
          onclick="loadApplePanel('https://appstoreconnect.apple.com/testflight', 'TestFlight')"
          style="font-size:0.85rem">
          ‚úàÔ∏è TestFlight
        </button>
        <button class="btn-secondary"
          onclick="loadApplePanel('https://developer.apple.com/account/resources/certificates/list', 'Certificates')"
          style="font-size:0.85rem">
          üîê Certificates
        </button>
        <button class="btn-secondary"
          onclick="loadApplePanel('https://developer.apple.com/account/resources/identifiers/list', 'App IDs')"
          style="font-size:0.85rem">
          üÜî App IDs
        </button>
        <button class="btn-secondary"
          onclick="loadApplePanel('https://developer.apple.com/account/resources/profiles/list', 'Profiles')"
          style="font-size:0.85rem">
          üìã Profiles
        </button>
        <button class="btn-secondary"
          onclick="loadApplePanel('https://developer.apple.com/design/human-interface-guidelines/', 'HIG')"
          style="font-size:0.85rem">
          üé® HIG
        </button>
        <button class="btn-secondary" onclick="loadApplePanel('https://developer.apple.com/documentation/', 'Docs')"
          style="font-size:0.85rem">
          üìö Documentation
        </button>
        <button class="btn-secondary" onclick="loadApplePanel('https://app.revenuecat.com', 'RevenueCat')"
          style="font-size:0.85rem">
          üí∞ RevenueCat
        </button>
        <button class="btn-secondary" onclick="loadApplePanel('https://supabase.com/dashboard', 'Supabase')"
          style="font-size:0.85rem">
          ‚ö° Supabase
        </button>
        <button class="btn-secondary" onclick="loadApplePanel('https://appscreens.com', 'AppScreens')"
          style="font-size:0.85rem">
          üñºÔ∏è AppScreens
        </button>
      </div>
      <div id="apple-panel-label" style="font-size:0.9rem;color:var(--text-secondary);margin-bottom:8px;">
        Select a tool above to load it here, or click ‚Üó to open in a new tab.
      </div>
      <div id="apple-iframe-wrapper"
        style="width:100%;height:calc(100vh - 220px);border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,0.1);display:none;">
        <iframe id="apple-iframe" src="about:blank"
          style="width:100%;height:100%;border:none;border-radius:12px;background:#fff;"></iframe>
      </div>
      <div id="apple-fallback" style="display:none;text-align:center;padding:3rem;">
        <p style="font-size:1.1rem;margin-bottom:1rem;">Apple blocks embedding in iframes for security.</p>
        <button class="btn-primary" id="apple-fallback-link" onclick="">Open in New Tab ‚Üó</button>
      </div>
    </section>
  </main>

  <!-- New Project Modal -->
  <div id="modal-overlay" class="modal-overlay" onclick="closeModal()">
    <div class="modal-content" onclick="event.stopPropagation()">
      <h2 class="modal-title" id="modal-title">New Project</h2>
      <div id="modal-body"></div>
    </div>
  </div>

  <script src="factory-data.js"></script>
  <script src="app.js"></script>
  <script>
    // Live Factory Status ‚Äî tries local JSON first, then Supabase
    const SUPA_URL = 'https://tkjlbgzymqnthyfzlwug.supabase.co';
    const SUPA_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRramxiZ3p5bXFudGh5Znpsd3VnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIxNjA2ODgsImV4cCI6MjA4NzczNjY4OH0.CX2aNeHdsBgqSgSIkZrpgo18vvY6yjALmnXJppqTsks';

    function renderAgents(data) {
      data.forEach(agent => {
        const el = document.getElementById(`factory-status-${agent.agent_id}`);
        if (!el) return;
        const isWorking = agent.status === 'working';
        const dot = isWorking ? 'üü¢' : '‚ö´';
        const label = isWorking ? 'Working' : 'Idle';
        const task = agent.current_task || '';
        const ago = agent.last_updated ? timeAgo(new Date(agent.last_updated)) : '';
        el.innerHTML = `${dot} <strong>${label}</strong>${task ? ' ‚Äî ' + task : ''}${ago ? ' <span style="opacity:0.5;font-size:0.75rem">(' + ago + ')</span>' : ''}`;
        el.style.color = isWorking ? '#10B981' : '#6B7280';
      });
    }

    async function fetchFactoryStatus() {
      try {
        // Try local file first (works with file:// and local dev)
        const localRes = await fetch('./factory-status.json?' + Date.now());
        if (localRes.ok) {
          const data = await localRes.json();
          renderAgents(data);
          return;
        }
      } catch (e) { }
      // Fall back to Supabase
      try {
        const res = await fetch(`${SUPA_URL}/rest/v1/factory_status?select=*`, {
          headers: { 'apikey': SUPA_KEY, 'Authorization': `Bearer ${SUPA_KEY}` }
        });
        const data = await res.json();
        renderAgents(data);
      } catch (e) {
        console.error('Factory status fetch error:', e);
      }
    }

    function timeAgo(date) {
      const seconds = Math.floor((new Date() - date) / 1000);
      if (seconds < 60) return 'just now';
      if (seconds < 3600) return Math.floor(seconds / 60) + 'm ago';
      if (seconds < 86400) return Math.floor(seconds / 3600) + 'h ago';
      return Math.floor(seconds / 86400) + 'd ago';
    }

    fetchFactoryStatus();
    setInterval(fetchFactoryStatus, 10000);
  </script>
</body>

</html>